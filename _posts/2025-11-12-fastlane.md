---
title:  "Added a pull request to fastlane to support new screen sizes"

categories:
  - fastlane
tags:
  - Screensize
  - fastlane
---

I have an app that hadnâ€™t been updated for five years, but in September I received a kind review from a user, which asks for deleting feature of search results.

<img src="./assets/img/post/review.png" alt="review" width="500">

Appreciating the review, I decided to make a small update and release it.
However, when I tried to upload screenshots through fastlane, it failed with errors.
~~~
[18:11:51]: ğŸš« Error: ./fastlane/screenshots/en-US/iPad Pro 13-inch (M4)-1-FillingPAOFieldsOfProductViewController.png - Invalid screen size (Actual size is 2064x2752. See the specifications to fix https://help.apple.com/app-store-connect/#/devd274dd925)
~~~
{: .language-bash}
But according to [Appleâ€™s documentation](https://developer.apple.com/help/app-store-connect/reference/app-information/screenshot-specifications), the sizes in errors were valid.
I found that fastlane hadnâ€™t been updated with new devices for about four years, and there were already a few open pull requests related to this. Referring to those, I wrote some code myself and tried again.
~~~
[22:38:33]: fastlane finished with errors
bundler: failed to load command: fastlane (/Users/[...]/.rbenv/versions/3.1.2/lib/ruby/gems/3.1.0/bin/fastlane)
Spaceship::AppStoreScreenshotError: [!] en-US
~~~
{: .language-bash}
Then even stranger errors appeared.
The cause turned out to be that the [App Store Connect API](https://developer.apple.com/documentation/appstoreconnectapi/screenshotdisplaytype) still does not support 6.9â€™â€™ and 6.3â€™â€™ device sizes. 

I was shocked for two reasons:
1. How could App Store Connect API not support these devices for years?
2. How could people submit pull requests without actually running the code and verifying that previews upload correctly?

For the first one, I realized that not many developers automate screenshot uploads, and using 6.5â€™â€™ screenshots works fine anyway. I submitted feedback to Apple.
For second, Iâ€™m still not sureâ€”maybe Iâ€™m missing something.

Anyway, adding new sizes to the existing device types worked fine. So I submitted [a pull request](https://github.com/fastlane/fastlane/pull/29742)

Through this, I learned that fastlane isnâ€™t really a black box. A Gemfile is just like a Podfile or SPMâ€”itâ€™s all code! You can even point it to your local repository like this:
~~~
gem "fastlane", path: '/Users/[...]/Documents/fastlane'
~~~
{: .language-ruby}

Opening black boxes is always fun â¤ï¸â€ğŸ”¥
